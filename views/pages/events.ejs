<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events Page</title>
    <link rel="stylesheet" type="text/css" href="./css/styles.css"> 
</head>
<body>
    <header>
        <!-- include ejs header -->
        <%- include('../partials/header') %>
    </header>
    <main>
        <div class="container">
            <h1>Events List</h1>

            <!-- Admin Controls-->
            <% if (isAdmin) { %>
                <div class="admin-controls">
                    <h2>Admin Controls</h2>
                    
                    <!-- Form to add a new event -->
                    <form action="/events/add" method="POST">
                        <h3>Add Event</h3>
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required><br>
                        <label for="type">Type:</label>
                        <input type="text" id="type" name="type" required><br>
                        <label for="date">Date:</label>
                        <input type="date" id="date" name="date" required><br>
                        <label for="attendees">Attendees:</label>
                        <input type="number" id="attendees" name="attendees" required><br>
                        <button type="submit">Add Event</button>
                    </form>
                </div>
            <% } %>

            <ul class="container">
                <% events.forEach(function(event) { %>
                    <li>
                        <strong><%= event.name %></strong><br>
                        Type: <%= event.type %><br>
                        Date: <%= event.date %><br>
                        Attendees: <%= event.attendees %><br>
                        
                        <% if (isAdmin) { %>
                            <button class="edit-button"><a href="/edits/<%= event.id %>/edit">Edit</a></button>
                            <form action="/events/<%= event.id %>/delete" method="POST" style="display:inline;">
                                <button class="delete-button" type="submit">Delete</button></form>
                        <% } %>
                    </li>
                <% }); %>
            </ul>
            <h1>Register</h1>
            <form id="registrationForm" action="/events" method="post">
                <label for="event">Event:</label>
                <select id="event" name="event">
                    <% events.forEach(function(event) { %>
                        <option value="<%= event.name %>"><%= event.name %></option>
                    <% }); %>
                </select>

                <label for="name">Name:</label>
                <input type="text" id="name" name="name">

                <label for="email">Email:</label>
                <input type="email" id="email" name="email">

                <button type="submit">Register</button>
            </form>
        </div>
    </main>
    <footer>
        <%- include('../partials/footer') %>
    </footer>
</body>
</html>